<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¿å—ä¼°å€¼ç›‘æ§ç³»ç»Ÿ - Vue + Tailwind åŸå‹</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue.js 3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- è‡ªå®šä¹‰é…ç½® -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bank': '#ef4444',
                        'consumer': '#8b5cf6', 
                        'tech': '#10b981'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50">
    <div id="app" class="max-w-md mx-auto bg-white min-h-screen">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-5 text-center">
            <h1 class="text-xl font-semibold mb-2">ğŸ“Š æ¿å—ä¼°å€¼ç›‘æ§</h1>
            <div class="text-xs opacity-90">æ•°æ®æ›´æ–°æ—¶é—´: {{ updateTime }}</div>
        </div>

        <!-- åŠ è½½çŠ¶æ€ -->
        <div v-if="loading" class="text-center py-8 text-gray-500">
            <div class="animate-spin inline-block w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full mb-2"></div>
            <div>æ­£åœ¨è·å–æœ€æ–°æ•°æ®...</div>
        </div>

        <!-- é”™è¯¯çŠ¶æ€ -->
        <div v-if="error" class="text-center py-8 text-red-500">
            <div>æ•°æ®è·å–å¤±è´¥</div>
            <button @click="retryLoad" class="mt-2 bg-blue-500 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-600">
                ç‚¹å‡»é‡è¯•
            </button>
        </div>

        <!-- ä¸»è¦å†…å®¹ -->
        <div v-if="!loading && !error">
            <!-- å®è§‚ç»æµæŒ‡æ ‡ -->
            <div class="m-4 bg-white rounded-xl shadow-md overflow-hidden">
                <div class="bg-gray-50 px-4 py-3 border-b border-gray-200">
                    <h2 class="text-base font-semibold text-gray-700">ğŸŒ å®è§‚ç»æµæŒ‡æ ‡</h2>
                </div>
                <div class="p-4 space-y-4">
                    <div v-for="indicator in macroIndicators" :key="indicator.name" 
                         class="flex justify-between items-center py-3 border-b border-gray-100 last:border-b-0">
                        <div class="font-medium text-gray-800">{{ indicator.name }}</div>
                        <div class="text-right">
                            <div class="text-base font-semibold text-blue-600">{{ indicator.value }}</div>
                            <div class="text-xs mt-1" :class="indicator.changeClass">{{ indicator.change }}</div>
                            <div v-if="indicator.note" class="text-xs text-gray-500 mt-1">{{ indicator.note }}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ¿å—ä¼°å€¼å¡ç‰‡ -->
            <div v-for="sector in sectors" :key="sector.id" class="m-4 bg-white rounded-xl shadow-md overflow-hidden">
                <!-- æ¿å—å¤´éƒ¨ -->
                <div class="p-4 text-white" :class="sector.headerClass">
                    <h3 class="text-lg font-semibold">{{ sector.icon }} {{ sector.name }}</h3>
                </div>
                
                <!-- æ¿å—å†…å®¹ -->
                <div class="p-4">
                    <!-- PEä¼°å€¼åŒºåŸŸ -->
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-sm text-gray-600">å½“å‰PE</span>
                            <span class="text-xl font-bold text-blue-600">{{ sector.currentPE }}</span>
                        </div>
                        
                        <!-- åˆ†ä½æ•°å±•ç¤º -->
                        <div class="bg-gray-50 rounded-lg p-3 grid grid-cols-3 gap-2">
                            <div class="text-center">
                                <div class="text-xs text-gray-500 mb-1">20%åˆ†ä½</div>
                                <div class="text-sm font-semibold text-gray-800">{{ sector.percentiles.p20 }}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs text-gray-500 mb-1">50%åˆ†ä½</div>
                                <div class="text-sm font-semibold text-gray-800">{{ sector.percentiles.p50 }}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs text-gray-500 mb-1">70%åˆ†ä½</div>
                                <div class="text-sm font-semibold text-gray-800">{{ sector.percentiles.p70 }}</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è‚¡æ¯ç‡åŒºåŸŸ -->
                    <div class="pt-4 border-t border-gray-200">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">è‚¡æ¯ç‡</span>
                            <div class="text-right">
                                <span class="text-base font-semibold text-red-500">{{ sector.dividendRate }}</span>
                                <div class="text-xs text-gray-500">({{ sector.dividendPercentile }})</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨ç©ºç™½ -->
        <div class="h-8"></div>
    </div>

    <script>
        const { createApp, ref, onMounted } = Vue;

        createApp({
            setup() {
                // å“åº”å¼æ•°æ®
                const loading = ref(false);
                const error = ref(false);
                const updateTime = ref('');

                // å®è§‚æŒ‡æ ‡æ•°æ®
                const macroIndicators = ref([
                    {
                        name: 'LPRåˆ©ç‡',
                        value: '3.45%',
                        change: '(â†“0.1%)',
                        changeClass: 'text-green-600',
                        note: null
                    },
                    {
                        name: '10å¹´å›½å€ºåˆ©ç‡',
                        value: '2.68%',
                        change: '(â†‘0.05%)',
                        changeClass: 'text-red-500',
                        note: 'è·ç¦»3%è¿˜æœ‰0.32%'
                    },
                    {
                        name: 'è‚¡å€ºåˆ©å·®',
                        value: '1.23%',
                        change: '(å†å²50%åˆ†ä½)',
                        changeClass: 'text-gray-600',
                        note: 'è‚¡ç¥¨ç›¸å¯¹å€ºåˆ¸å¸å¼•åŠ›ä¸­ç­‰'
                    }
                ]);

                // æ¿å—æ•°æ®
                const sectors = ref([
                    {
                        id: 'bank',
                        name: 'é“¶è¡Œæ¿å—',
                        icon: 'ğŸ¦',
                        headerClass: 'bg-gradient-to-r from-red-500 to-red-600',
                        currentPE: '5.2',
                        percentiles: {
                            p20: '4.8',
                            p50: '6.1',
                            p70: '7.3'
                        },
                        dividendRate: '4.2%',
                        dividendPercentile: 'å†å²80%åˆ†ä½'
                    },
                    {
                        id: 'consumer',
                        name: 'æ¶ˆè´¹æ¿å—',
                        icon: 'ğŸ›’',
                        headerClass: 'bg-gradient-to-r from-purple-500 to-purple-600',
                        currentPE: '18.5',
                        percentiles: {
                            p20: '16.2',
                            p50: '22.1',
                            p70: '28.4'
                        },
                        dividendRate: '2.1%',
                        dividendPercentile: 'å†å²30%åˆ†ä½'
                    },
                    {
                        id: 'tech',
                        name: 'ç§‘æŠ€æ¿å—',
                        icon: 'ğŸ’»',
                        headerClass: 'bg-gradient-to-r from-green-500 to-green-600',
                        currentPE: '25.8',
                        percentiles: {
                            p20: '22.1',
                            p50: '31.2',
                            p70: '42.6'
                        },
                        dividendRate: '1.2%',
                        dividendPercentile: 'å†å²20%åˆ†ä½'
                    }
                ]);

                // æ–¹æ³•
                const updateCurrentTime = () => {
                    const now = new Date();
                    updateTime.value = now.toLocaleString('zh-CN', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                };

                const loadData = async () => {
                    loading.value = true;
                    error.value = false;
                    
                    try {
                        // æ¨¡æ‹ŸAPIè°ƒç”¨
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        // æ¨¡æ‹Ÿéšæœºå¤±è´¥
                        if (Math.random() < 0.1) {
                            throw new Error('Network error');
                        }
                        
                        updateCurrentTime();
                        loading.value = false;
                    } catch (err) {
                        loading.value = false;
                        error.value = true;
                    }
                };

                const retryLoad = () => {
                    loadData();
                };

                // ç”Ÿå‘½å‘¨æœŸ
                onMounted(() => {
                    loadData();
                    
                    // å®šæ—¶æ›´æ–°æ—¶é—´
                    setInterval(updateCurrentTime, 30000);
                });

                return {
                    loading,
                    error,
                    updateTime,
                    macroIndicators,
                    sectors,
                    retryLoad
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
